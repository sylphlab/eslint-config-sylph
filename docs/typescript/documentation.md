# TypeScript Project Documentation

This section covers the standards for documenting TypeScript projects, including the documentation site and API reference generation. Refer also to the documentation requirements in the General Project Development Guidelines.

## 1. Documentation Tool (VitePress)

- **Tool**: VitePress (recommended for its speed, developer experience, and Vue integration).
- **Setup**: Follow the official VitePress documentation for setup.
- **Standard Configuration** (`docs/.vitepress/config.mts`):
  ```typescript
  import { defineConfig } from 'vitepress';

  export default defineConfig({
    lang: 'en-US',
    title: 'Project Name', // Replace with actual project name
    description: 'Concise and informative project description.', // Replace
    lastUpdated: true,
    cleanUrls: true,

    themeConfig: {
      logo: '/logo.svg', // Optional: Add logo to docs/public/logo.svg
      siteTitle: 'Project Name', // Replace

      nav: [
        { text: 'Guide', link: '/guide/introduction', activeMatch: '/guide/' },
        { text: 'API Reference', link: '/api/', activeMatch: '/api/' },
        // Add other top-level sections like Examples, Concepts, etc.
      ],

      sidebar: {
        '/guide/': [
          {
            text: 'Guide',
            items: [
              { text: 'Introduction', link: '/guide/introduction' },
              { text: 'Installation', link: '/guide/installation' },
              { text: 'Quick Start', link: '/guide/getting-started' },
              // Add more guide pages
            ],
          },
        ],
        '/api/': [
          // Sidebar for API docs - potentially auto-generated
          // See TypeDoc integration below
          { text: 'API Home', link: '/api/' },
          // Add links to modules/classes generated by TypeDoc
        ],
      },

      socialLinks: [
        // Replace with actual repository link
        { icon: 'github', link: 'https://github.com/your-org/your-repo' },
      ],

      editLink: {
        // Replace with actual repository link
        pattern: 'https://github.com/your-org/your-repo/edit/main/docs/:path',
        text: 'Edit this page on GitHub',
      },

      footer: {
        message: 'Released under the MIT License.', // Adjust if needed
        // Replace with actual copyright holder
        copyright: `Copyright Â© ${new Date().getFullYear()} Your Name/Org`,
      },

      // Optional: Algolia search configuration
      // search: {
      //   provider: 'algolia',
      //   options: {
      //     appId: '...',
      //     apiKey: '...',
      //     indexName: '...'
      //   }
      // }
    },

    // Optional: Markdown configuration
    markdown: {
      lineNumbers: true,
    },
  });
  ```

## 2. API Documentation Generator (TypeDoc)

- **Tool**: TypeDoc with `typedoc-plugin-markdown`.
- **Purpose**: Generates Markdown files from TSDoc comments in the source code, suitable for integration into VitePress.
- **Integration Script** (`scripts/generate-api-docs.mts`):
  ```javascript
  import { Application, TSConfigReader, TypeDocReader } from 'typedoc';
  import { writeFile, mkdir } from 'fs/promises';
  import path from 'path';

  async function main() {
    const outputDir = 'docs/api'; // Output directory within VitePress docs
    const app = new Application();

    // Configure TypeDoc readers
    app.options.addReader(new TypeDocReader());
    app.options.addReader(new TSConfigReader());

    // Bootstrap TypeDoc
    app.bootstrap({
      entryPoints: ['src/index.ts'], // Adjust entry point if needed
      tsconfig: 'tsconfig.json',
      plugin: ['typedoc-plugin-markdown'], // Use the markdown plugin
      out: outputDir, // Output directory for markdown files
      readme: 'none', // Don't generate a top-level README in the API dir
      githubPages: false, // We are using VitePress, not GitHub Pages directly
      entryDocument: 'index.md', // Name of the main API entry file
      hideBreadcrumbs: true,
      hideInPageTOC: true,
    });

    const project = app.convert();

    if (project) {
      console.log(`Generating API documentation in ${outputDir}...`);
      await app.generateDocs(project, outputDir);
      console.log('API documentation generated successfully.');

      // Optional: Create a simple index.md if the plugin doesn't
      // This provides a landing page for the /api/ route
      try {
        await mkdir(outputDir, { recursive: true });
        await writeFile(path.join(outputDir, 'index.md'), '# API Reference\n\nBrowse the API documentation using the sidebar.', 'utf-8');
      } catch (e) { /* Ignore if exists */ }

    } else {
      console.error('Failed to convert project.');
      process.exit(1);
    }
  }

  main().catch((error) => {
    console.error('Error generating API docs:', error);
    process.exit(1);
  });
  ```
- **NPM Script**: Ensure the `docs:api` script in `package.json` correctly executes this script (e.g., `node scripts/generate-api-docs.mts` or `pnpm exec node scripts/generate-api-docs.mts`). This script should be run as part of the `docs:build` process.